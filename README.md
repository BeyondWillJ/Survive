# 生存游戏机器人

[![Release v1.0.0](https://img.shields.io/badge/release-v1.0.0-blue)](https://github.com/BeyondWillJ/Survive/releases/tag/v1.0.0)

>你独自驾机飞越落基山脉，飞机却突然发生引擎故障，只得迫降山顶。孤立无援的你怎样才能在茫茫群山中生存下去？

欢迎使用生存游戏机器人！该机器人基于 NoneBot2 框架，允许用户在聊天群组或私聊中体验一个互动的文字冒险游戏。玩家扮演一位在落基山脉山脉坠机的飞行员，通过选择不同选项决定故事走向以及生存结局。

>网页版应用的源码见`/webUI`中。

## 游戏概述

在本游戏中，你需要面对突发状况：飞机在旅途上发生引擎故障，被迫迫降在落基山脉的山顶。你必须做出一系列关键选择，决定是否能在恶劣的环境下生存下去。游戏的流程为：
1. 启动游戏后，从第1章开始故事情节。
2. 每个章节展示一段描述和若干选项，选择即代表你所走的故事路径。
3. 当章节中的选项数量为1且直接跳转到第1章时，即视为游戏失败；当章节没有继续选项时，则视为成功生还。

## 项目结构

- `survive.py`：主游戏逻辑文件。包括：
  - 游戏会话管理（支持群组与私聊）
  - 游戏章节文本和选项的处理，来自外部 JSON 文件 (`survive.json`)
  - 用户命令的解析与响应（开始游戏、选择选项、显示帮助、重启游戏、查看游戏档案）
  - 游戏结算信息记录到日志文件 `survive.log`
  
- `survive/` 目录：包含游戏所需的资源文件，例如：
  - `survive.json`：游戏章节的定义（每章节包含文本描述和选项列表）
  - 图片资源：`cover.gif` 用于介绍页面，以及其他章节对应的动画 GIF 文件（如 `2.gif`, `3.gif` 等）

## 安装和运行

1. 克隆项目仓库：
   ```sh
   git clone https://github.com/BeyondWillJ/Survive.git
   cd Survive
   ```
2. 安装必需的依赖：
   ```sh
   pip install nonebot2 nonebot-adapter-onebot
   ```
3. 运行机器人：
   ```sh
   nb run
   ```

确保你的 NoneBot2 机器人已正确配置 OneBot v11 适配器，以便与平台通讯。

## 使用说明

启动机器人后，你可以通过以下命令进行交互：

### 开始游戏

- 发送 `survive`、`Survive!` 或 `生存游戏` 开始全新的游戏会话。机器人会从章节`1`开始故事，并发送引导图片和故事文本。

### 游戏过程

- 当机器人发送当前章节文本后，会在文本下方显示选项列表。你需要直接输入对应数字（如 "1"、"2" 等）来选择你的下一步行动。
- 每个选项会根据你当前所选的章节索引改变故事走向，并可能发送对应章节的图片资源。

### 游戏结束

- 如果下一章节只有一个选项且该选项指向章节 `1`，则视为游戏失败。此时机器人会发送失败提示和结算信息，并将结果记录在 `survive.log` 中。
- 如果章节中不再包含选项，则视为成功生还。机器人会发送成功提示，同时记录结算信息。

### 重启游戏

- 发送 `重新开始游戏` 重启游戏，会话将重新回到章节`1`。

### 帮助信息

- 发送 `生存帮助` 或 `survive_help` 可查看命令及游戏说明信息。

### 查看游戏档案

- 发送 `生存档案` 可查看游戏记录。档案记录被保存至 `survive.log` 文件中，记录玩家的游戏结果、玩家姓名和游戏结束时间。

## 日志和数据记录

- 游戏流程和结算信息会被追加写入 `survive.log` 文件（位于 `survive/` 目录中），方便管理员查阅玩家的游戏记录及结局信息。
- 游戏章节文本和选项定义存储在 `survive.json` 文件中，你可以修改此文件以扩展或调整游戏情节。

## 贡献

欢迎对生存游戏机器人提出建议或提交拉取请求。如果你发现问题或有改进方案，请在 GitHub 仓库中提交 issue 或 PR。

## 许可证

该项目采用 MIT 许可证，详细内容请见 [LICENSE](LICENSE) 文件。

祝你游戏愉快，成功生还！
